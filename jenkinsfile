pipeline {
   agent {
      docker-compose -p -f docker-compose.yml up --build
   }
   stages{
      stage("hello") {
         steps{
            echo 'hello world'
         }
      }
      stage("build") {
         steps{
            echo 'building'
         }
      }
      stage("deploy") {
         steps{
            echo 'deploying'
         }
      }
      stage("release") {
         steps{
            echo 'releasing'
         }
      }
   }

   post {
      always {
         sh "docker-compose down -v"
      }
    }
}